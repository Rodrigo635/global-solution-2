{% load static %}

<!doctype html>
<html lang="pt-BR">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Connecta FIAP</title>

        <!-- Google Font -->
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
        <link rel="stylesheet" href="{% static 'css/index.css' %}">
        
        {% if user.is_authenticated and user.profile.dark_mode %}
        <link rel="stylesheet" href="{% static 'css/darkmode.css' %}" id="darkmode-css">
        {% endif %}

        <!-- V-Libras -->
        {% if user.is_authenticated and user.profile.vlibras_enabled %}
        <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
        {% endif %}
        
        <!-- Tamanho da fonte -->
        <style>
            {% if user.is_authenticated %}
                {% if user.profile.font_size == 'small' %}
                    body { font-size: 0.875rem; }
                    h1 { font-size: 2rem; }
                    h2 { font-size: 1.75rem; }
                    h3 { font-size: 1.5rem; }
                    h4 { font-size: 1.25rem; }
                    h5 { font-size: 1.1rem; }
                    h6 { font-size: 1rem; }
                {% elif user.profile.font_size == 'large' %}
                    body { font-size: 1.125rem; }
                    h1 { font-size: 2.75rem; }
                    h2 { font-size: 2.25rem; }
                    h3 { font-size: 1.875rem; }
                    h4 { font-size: 1.5rem; }
                    h5 { font-size: 1.25rem; }
                    h6 { font-size: 1.125rem; }
                {% endif %}
            {% endif %}
        </style>
        
        {% block extra_head %}{% endblock %}
    </head>

    <body>
        <nav class="navbar navbar-expand-lg sticky-top">
            <div class="container">
                {% if user.is_authenticated %}
                    <a class="navbar-brand fw-bold d-flex align-items-center" href="{% url 'feed' %}">
                        <div class="p-0 me-1 rounded-3 d-flex align-items-center justify-content-center" style="background:linear-gradient(135deg,var(--primary),var(--accent)); width:44px; height:44px; display:grid; place-items:center; color:white">
                            <h1 class="display-6 m-0 fw-semibold">C</h1>
                        </div>
                        <span><h4 class="m-0">onnecta FIAP</h4></span>
                    </a>
                {% else %}
                    <a class="navbar-brand fw-bold d-flex align-items-center" href="{% url 'home' %}">
                        <div class="p-0 me-1 rounded-3 d-flex align-items-center justify-content-center" style="background:linear-gradient(135deg,var(--primary),var(--accent)); width:44px; height:44px; display:grid; place-items:center; color:white">
                            <h1 class="display-6 m-0 fw-semibold">C</h1>
                        </div>
                        <span><h4 class="m-0">onnecta FIAP</h4></span>
                    </a>
                {% endif %}

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navMenu">
                    <ul class="navbar-nav ms-auto align-items-center">
                        {% if user.is_authenticated %}
                            <li class="nav-item"><a class="nav-link" href="{% url 'feed' %}">Início</a></li>
                            <li class="nav-item"><a class="nav-link" href="{% url 'calls' %}">Chamadas</a></li>
                            <li class="nav-item"><a class="nav-link" href="{% url 'opportunities' %}">Oportunidades</a></li>
                            <li class="nav-item"><a class="nav-link" href="{% url 'friends' %}">Amigos</a></li>
                            <li class="nav-item"><a class="nav-link" href="{% url 'work_ai' %}">Work AI</a></li>
                            <li class="nav-item ms-0 ms-md-2 mb-3 mb-lg-0"><a href="{% url 'my_profile' %}" class="user-nav-item"><i class="bi bi-person-fill fs-5"></i></a></li>
                        {% else %}
                            <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Início</a></li>
                            {% if request.resolver_match.url_name == 'home' %}
                                <li class="nav-item"><a class="nav-link" href="#como">Como funciona</a></li>
                                <li class="nav-item"><a class="nav-link" href="#empresas">Para empresas</a></li>
                                <li class="nav-item"><a class="nav-link" href="#precos">Preços</a></li>
                            {% endif %}
                            <li class="nav-item ms-2 ms-0 ms-md-2 mb-2 mb-lg-0"><a class="btn btn-outline-primary" href="{% url 'login' %}">Entrar</a></li>
                            <li class="nav-item ms-2 ms-0 ms-md-2 mb-3 mb-lg-0"><a class="btn btn-primary" href="{% url 'signup' %}">Cadastrar</a></li>
                        {% endif %}

                    </ul>
                </div>
            </div>
        </nav>

        <!-- Container para notificações toast -->
        <div class="toast-container" id="toastContainer"></div>

        <!-- Mensagens (as escondidas, serão convertidas em toasts) -->
        {% if messages %}
        <div id="django-messages" style="display: none;">
            {% for message in messages %}
            <div data-message="{{ message }}" data-tags="{{ message.tags }}"></div>
            {% endfor %}
        </div>
        {% endif %}

        <main>
            {% block content %}{% endblock %}
        </main>

        <footer class="pt-5 px-0">
            <div class="container pb-4">
                <div class="row text-center text-md-start">
                    <div class="col-md-4">
                        <a href="{% url 'home' %}">
                            <h5 class="text-white">Connecta FIAP</h5>
                        </a>
                        <p class="small">Reinventando sua forma de fazer networking e acelerando sua carreira e contratações.</p>
                    </div>
                    <div class="col-0 col-md-1">

                    </div>
                    <div class="col-md-3">
                        <h6 class="text-white"><i class="bi bi-link-45deg me-2"></i>Links úteis</h6>
                        <ul class="list-unstyled">
                            <li><a href="{% url 'home' %}"><i class="bi bi-house-fill me-2"></i>Início</a></li>
                            {% if user.is_authenticated %}
                                <li><a href="{% url 'calls' %}"><i class="bi bi-telephone-fill me-2"></i>Chamadas</a></li>
                                <li><a href="{% url 'opportunities' %}"><i class="bi bi-briefcase-fill me-2"></i>Oportunidades</a></li>
                                <li><a href="{% url 'friends' %}"><i class="bi bi-people-fill me-2"></i>Amigos</a></li>
                                <li><a href="{% url 'work_ai' %}"><i class="bi bi-robot me-2"></i>Work AI</a></li>
                            {% else %}
                                {% if request.resolver_match.url_name == 'home' %}
                                    <li><a href="#como"><i class="bi bi-question-circle-fill me-2"></i>Como funciona</a></li>
                                    <li><a href="#empresas"><i class="bi bi-briefcase-fill me-2"></i>Para empresas</a></li>
                                    <li><a href="#precos"><i class="bi bi-currency-dollar me-2"></i>Preços</a></li>
                                {% endif %}
                            {% endif %}
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <h6 class="text-white"><i class="bi bi-info-circle me-2"></i>Dados legais e contato</h6>
                        <ul class="list-unstyled">
                            <li><a href="{% url 'terms_of_use' %}"><i class="bi bi-file-earmark-text-fill me-2"></i>Termos de uso</a></li>
                            <li><a href="{% url 'privacy_policy' %}"><i class="bi bi-shield-lock-fill me-2"></i>Política de privacidade</a></li>
                            <li><p><i class="bi bi-envelope-fill me-2"></i>connectfiap@gmail.com</p></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="bg-azul-escuro py-4">
                <div class="container text-center">
                    <p class="small mb-0">Todos os direitos não reservados, &copy; Global Solution, 2025</p>
                </div>
            </div>
        </footer>

        <!-- Widget do V-Libras -->
        {% if user.is_authenticated and user.profile.vlibras_enabled %}
        <div vw class="enabled">
            <div vw-access-button class="active"></div>
            <div vw-plugin-wrapper>
                <div class="vw-plugin-top-wrapper"></div>
            </div>
        </div>
        <script>
            new window.VLibras.Widget('https://vlibras.gov.br/app');
        </script>
        {% endif %}

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
        <script src="{% static 'js/toast-notifications.js' %}"></script>
        <script src="{% static 'js/index.js'}"></script>
    </body>

</html>