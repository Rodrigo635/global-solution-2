{% extends 'components/index.html' %}
{% load static %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
<link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}

{% block content %}
<div class="container py-5">
  <!-- Card principal do perfil -->
  <div class="feature-card p-5 mb-4 profile-header position-relative">
    <div class="row g-3 align-items-center justify-content-center">
      <div class="col-12 col-md-auto">
        <div class="avatar-lg overflow-hidden rounded-3 mx-auto">
          {% if profile.avatar %}
            <img src="{{ profile.avatar.url }}" alt="avatar" class="img-fluid">
          {% else %}
            <i class="bi bi-person-fill text-white icon-perfil"></i>
          {% endif %}
        </div>
      </div>

      <div class="col">
        <div class="small text-muted text-center text-md-start">Meu perfil</div>
        <div class="h4 mb-0 fw-bold text-center text-md-start">{{ user.get_full_name|default:user.username }}</div>
        <div class="small text-muted text-center text-md-start">#{{ profile.uid|default:user.id }}</div>

        <div class="mt-3 d-flex align-items-center gap-2 justify-content-center justify-content-md-start">
          <!-- Redes sociais -->
          {% for social in profile.socials %}
            <a href="{{ social.url }}" class="d-inline-flex align-items-center justify-content-center social-dot" target="_blank" rel="noopener">
              <i class="{{ social.icon_class }}"></i>
            </a>
          {% empty %}
            <div class="social-dot-placeholder d-flex gap-2">
              <a class="social-dot d-flex align-items-center justify-content-center text-primary fs-3"><i class="bi bi-facebook"></i></a>
              <a class="social-dot d-flex align-items-center justify-content-center text-primary fs-3"><i class="bi bi-instagram"></i></a>
              <a class="social-dot d-flex align-items-center justify-content-center text-primary fs-3"><i class="bi bi-linkedin"></i></a>
            </div>
          {% endfor %}
        </div>
      </div>

      <div class="col-auto ms-auto">
          <!-- Botão de editar -->
        <a href="#" class="btn btn-outline-secondary rounded-circle btn-edit" title="Editar perfil">
          <i class="bi bi-pencil-fill"></i>
        </a>
      </div>
    </div>
  </div>

  <div class="row g-4">
    <div class="col-lg-8">
      <!-- Abas do perfil -->
      <div class="d-flex gap-3 mb-4 flex-wrap">
        <div class="quick-box flex-fill p-4"><i class="bi bi-heart-fill text-danger me-2"></i>Postagens curtidas</div>
        <div class="quick-box flex-fill p-4"><i class="bi bi-chat-fill text-primary me-2"></i>Minhas postagens</div>
        <div class="quick-box flex-fill p-4"><i class="bi bi-telephone-fill text-success me-2"></i>Histórico de chamadas</div>
      </div>

      <!-- Configurações -->
      <h6 class="mb-3">Configurações</h6>
      <div class="list-group mb-0">
        <a href="#" class="list-group-item list-group-item-action d-flex align-items-center justify-content-between p-4">
          <div class="d-flex align-items-center gap-3">
            <div>
              <div class="fw-semibold"><i class="bi bi-gear-fill me-2"></i>Configurações</div>
            </div>
          </div>
          <div class="chev">
            <i class="bi bi-chevron-right"></i>
          </div>
        </a>
        <a href="#" class="list-group-item list-group-item-action d-flex align-items-center justify-content-between p-4">
          <div class="d-flex align-items-center gap-3">
            <div>
              <div class="fw-semibold"><i class="bi bi-shield-fill me-2"></i>Segurança</div>
            </div>
          </div>
          <div class="chev">
            <i class="bi bi-chevron-right"></i>
          </div>
        </a>
        <a href="#" class="list-group-item list-group-item-action d-flex align-items-center justify-content-between p-4">
          <div class="d-flex align-items-center gap-3">
            <div>
              <div class="fw-semibold"><i class="bi bi-person-standing me-2"></i>Acessibilidade</div>
            </div>
          </div>
          <div class="chev">
            <i class="bi bi-chevron-right"></i>
          </div>
        </a>
      </div>
    </div>

    <!-- Painel lateral -->
    <aside class="col-lg-4">
      <div class="feature-card p-4 mb-4">
        <ul class="list-unstyled mb-0">
          <li><h6 class="mb-2">Ações</h6></li>
          <li><a href="#" class="d-block py-2 text-decoration-none">Trocar de conta</a></li>
          <li><a href="#" class="d-block py-2 text-decoration-none">Ajuda</a></li>
          <li><a href="{% url 'logout' %}" class="d-block py-2 text-decoration-none text-danger">Sair</a></li>
        </ul>
      </div>

      <div class="feature-card p-4">
        <h6 class="mb-2">Precisa de ajuda? Entre em contato!</h6>
        <div class="small text-muted mb-2">Suporte: email.inventado@email.com</div>
        <a href="#" class="btn btn-outline-primary">Enviar mensagem</a>
      </div>
    </aside>
  </div>
</div>
{% endblock %}
